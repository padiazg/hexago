{{/*
Template: misc/readme.md
Description: Comprehensive README for hexagonal architecture projects with setup and usage instructions
Variables:
  - ProjectName: string - Name of the project/service
  - CoreLogic: string - Name of the core logic layer (e.g., "services", "usecases")
  - AdapterInboundDir: string - Name of the inbound adapter directory (e.g., "primary", "inbound")
  - AdapterOutboundDir: string - Name of the outbound adapter directory (e.g., "secondary", "outbound")
  - GoVersion: string - Go version requirement (e.g., "1.21")
  - WithDocker: bool - Include Docker-related documentation sections
*/}}
# {{.ProjectName}}

{{.ProjectName}} - Built with Hexagonal Architecture

Generated by [HexaGo](https://github.com/padiazg/hexago) - A hexagonal architecture scaffolding CLI tool.

## Overview

This project follows the **Hexagonal Architecture** (also known as Ports & Adapters) pattern, which promotes:
- Clear separation of concerns
- Framework independence in the core domain
- Testability through dependency inversion
- Maintainability and flexibility

## Project Structure

```
{{.ProjectName}}/
├── cmd/                          # Application commands (Cobra CLI)
│   ├── root.go                  # Root command and configuration
│   └── run.go                   # Server startup with graceful shutdown
├── internal/
│   ├── core/                    # CORE - Business logic (no external dependencies)
│   │   ├── domain/              # Domain entities and value objects
│   │   └── {{.CoreLogic}}/      # Application business logic
│   ├── adapters/                # ADAPTERS - External interfaces
│   │   ├── {{.AdapterInboundDir}}/    # Inbound adapters (HTTP, gRPC, CLI)
│   │   └── {{.AdapterOutboundDir}}/   # Outbound adapters (database, external APIs)
│   └── config/                  # Configuration management
├── pkg/                         # Public reusable packages
│   └── logger/                  # Logger implementation
├── main.go                      # Application entry point
├── Makefile                     # Common development tasks
└── README.md                    # This file
```

## Architecture Principles

### Dependency Rule
Dependencies flow inward:
```
Adapters → Core ({{.CoreLogic}}) → Domain
```

- **Core Domain** never depends on adapters or infrastructure
- **{{.CoreLogic | title}}** orchestrate domain logic and define interfaces (ports)
- **Adapters** implement the interfaces defined by the core

### Layers

1. **Domain** (`internal/core/domain/`)
   - Pure business entities
   - Value objects
   - Domain logic
   - No external dependencies

2. **{{.CoreLogic | title}}** (`internal/core/{{.CoreLogic}}/`)
   - Application business logic
   - Orchestrates domain objects
   - Defines port interfaces
   - Framework-agnostic

3. **Adapters** (`internal/adapters/`)
   - **{{.AdapterInboundDir | title}}**: Handle incoming requests (HTTP handlers, gRPC, CLI)
   - **{{.AdapterOutboundDir | title}}**: Handle outgoing calls (databases, external APIs)

4. **Infrastructure** (`internal/config/`, `pkg/`)
   - Cross-cutting concerns
   - Configuration
   - Logging
   - Utilities

## Getting Started

### Prerequisites

- Go {{.GoVersion}}+ installed
- Make (optional, for convenience commands)
{{if .WithDocker}}- Docker and Docker Compose (for containerized deployment)
{{end}}
### Installation

```bash
# Install dependencies
go mod download

# Build the application
make build
# or
go build -o {{.ProjectName}} main.go
```

### Running

```bash
# Run directly
./{{.ProjectName}} run

# Or using go run
go run main.go run

# Or using make
make run
```

The server will start on port 8080 (configurable via config file or environment variables).

### Configuration

Create a `.{{.ProjectName}}.yaml` file in the project root:

```yaml
server:
  port: 8080
  host: 0.0.0.0
  readtimeout: 15s
  writetimeout: 15s
  idletimeout: 60s
  shutdowntimeout: 30s

loglevel: info
logformat: json
```

Or use environment variables with `{{.ProjectName | upper}}_` prefix:

```bash
export {{.ProjectName | upper}}_SERVER_PORT=8080
export {{.ProjectName | upper}}_LOGLEVEL=debug
```

## Development

### Available Commands

```bash
make help          # Show all available commands
make build         # Build the application
make run           # Run the application
make test          # Run tests
make test-coverage # Run tests with coverage report
make clean         # Clean build artifacts
make fmt           # Format code
make lint          # Run linter
{{if .WithDocker}}make build-image   # Build Docker image
make docker-up     # Start Docker Compose services
make docker-down   # Stop Docker Compose services
{{end}}```

### Testing

```bash
# Run all tests
go test ./...

# Run tests with coverage
go test -v -race -coverprofile=coverage.out ./...

# View coverage report
go tool cover -html=coverage.out
```

{{if .WithDocker}}### Docker

```bash
# Build Docker image
docker build -t {{.ProjectName}}:latest .

# Run with Docker Compose
docker compose up -d

# View logs
docker compose logs -f

# Stop services
docker compose down
```
{{end}}

## API Endpoints

- `GET /health` - Health check endpoint

## Adding New Features

When adding new features, follow the hexagonal architecture:

1. **Add domain entities** in `internal/core/domain/`
2. **Add business logic** in `internal/core/{{.CoreLogic}}/`
3. **Add adapters** as needed:
   - HTTP handlers in `internal/adapters/{{.AdapterInboundDir}}/http/`
   - Database repositories in `internal/adapters/{{.AdapterOutboundDir}}/database/`

## Learn More

- [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)
- [Ports & Adapters Pattern](https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

## License

[Your License Here]

## Generated by HexaGo

This project was scaffolded using HexaGo, an opinionated CLI tool for generating hexagonal architecture projects.

Learn more: https://github.com/padiazg/hexago
